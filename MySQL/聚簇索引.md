# 聚簇索引 vs. 非聚簇索引

## 索引的基本概念

数据库索引是一种数据结构，用于快速定位和访问数据库表中的特定数据。它类似于书籍的目录，可以帮助数据库系统快速找到需要的数据行。

## 聚簇索引

聚簇索引是一种索引结构，其中索引的顺序与数据实际存储的物理顺序相同。换句话说，聚簇索引对表中的数据行进行了重新排序，使得数据行的物理存储顺序与索引的顺序一致。

### 特点

- 聚簇索引在数据库表中只能有一个，因为它决定了数据的物理存储顺序。
- 当使用聚簇索引时，数据行存储在同一页面上，因此对于范围查询或者区间查询，聚簇索引可以提供很好的性能。
- 聚簇索引适合于经常需要按照某种顺序进行范围查询或者区间查询的情况。

### 优势

- 聚簇索引的检索速度非常快，因为它直接指向数据行的物理位置，减少了磁盘IO的次数。
- 对于范围查询或者区间查询，聚簇索引通常能够提供更好的性能。

### 缺点

- 当对聚簇索引列进行更新或者插入操作时，可能会导致数据的物理重新排序，这会引起额外的性能开销。
- 对于经常需要进行插入、删除或者更新操作的表，聚簇索引可能会导致频繁的页面分裂和合并，影响性能。

## 非聚簇索引

非聚簇索引与聚簇索引相反，它的索引顺序与数据实际存储的物理顺序不同。非聚簇索引不会对数据行的物理存储顺序进行重新排序。

### 特点

- 表可以有多个非聚簇索引，因为它们不影响数据的物理存储顺序。
- 非聚簇索引通常是在磁盘上另外存储的数据结构，其中包含索引键和指向数据行的指针。

### 优势

- 对于经常需要进行插入、删除或者更新操作的表，非聚簇索引通常比聚簇索引更适合，因为它们不会引起数据的物理重新排序。

### 缺点

- 非聚簇索引检索数据时通常需要进行额外的磁盘IO操作，因为它们需要先根据索引查找到数据行的位置，然后再读取数据行。
- 对于范围查询或者区间查询，非聚簇索引的性能可能不如聚簇索引。

## 总结

- 聚簇索引适合于经常需要进行范围查询或者区间查询的情况，而非聚簇索引适合于经常需要进行插入、删除或者更新操作的情况。
- 在选择索引类型时，需要根据具体的业务需求和查询模式来进行权衡。

